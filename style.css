:root {
    --code-bg-light: #f8f9fa; /* Slightly off-white for light mode code blocks */
    --code-text-light: #212529;
    --code-border-light: #dee2e6;
    --code-header-bg-light: #e9ecef;
    --code-header-text-light: #495057; /* For language name */
    --code-copy-btn-bg-light: #f1f3f5;
    --code-copy-btn-border-light: #ced4da;
    --code-copy-btn-text-light: #495057;
    --code-copy-btn-hover-bg-light: #e9ecef;
    --code-copy-btn-hover-border-light: #adb5bd;
    --code-copy-btn-copied-bg-light: #d1e7dd; /* Light green */
    --code-copy-btn-copied-border-light: #badbcc;
    --code-copy-btn-copied-text-light: #0f5132;

    /* Dark Theme Code Block General */
    --code-bg-dark: #1E1E1E;
    --code-text-dark: #D4D4D4;
    --code-border-dark: #3c3c3c;
    --code-header-bg-dark: #252526;
    --code-header-text-dark: #CCCCCC;
    --code-copy-btn-bg-dark: #333333;
    --code-copy-btn-border-dark: #454545;
    --code-copy-btn-text-dark: #CCCCCC;
    --code-copy-btn-hover-bg-dark: #3c3c3c;
    --code-copy-btn-hover-border-dark: #505050;
    /* --code-copy-btn-copied-bg-dark: #22c55e; (Hardcoded below) */
    /* --code-copy-btn-copied-border-dark: #16a34a; (Hardcoded below) */
    /* --code-copy-btn-copied-text-dark: #ffffff; (Hardcoded below) */
}

/* Custom scrollbar for webkit browsers */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
::-webkit-scrollbar-thumb { background: #888; border-radius: 10px; }
::-webkit-scrollbar-thumb:hover { background: #555; }

/* Dark mode scrollbar */
.dark ::-webkit-scrollbar-track { background: #2d3748; }
.dark ::-webkit-scrollbar-thumb { background: #4a5568; }
.dark ::-webkit-scrollbar-thumb:hover { background: #718096; }

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    overscroll-behavior-y: none;
    background-color: #f3f4f6; /* bg-gray-100 */
    color: #111827; /* text-gray-900 */
}
.dark body {
    background-color: #1f2937; /* dark:bg-gray-800 */
    color: #f3f4f6; /* dark:text-gray-100 */
}

/*
  Original .code-block-wrapper and its header.
  This might be for simpler preformatted text not using the "enhanced" code block system.
  If the "enhanced code block" (below) is the sole method, this section might be removable.
*/
.code-block-wrapper {
    margin-bottom: 1rem;
    border-radius: 0.375rem;
    overflow: hidden;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* shadow-md */
    border: 1px solid #e5e7eb; /* border border-gray-200 */
}
.dark .code-block-wrapper {
    border-color: #374151; /* dark:border-gray-700 */
}

.code-block-wrapper .code-block-header { /* Scoped to avoid conflict if names are similar */
    padding: 0.5rem 0.75rem;
    font-size: 0.8em;
    font-weight: 500;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: #f3f4f6; /* bg-gray-100 */
    color: #374151; /* text-gray-700 */
    border-bottom: 1px solid #d1d5db; /* border-b border-gray-300 */
}
.dark .code-block-wrapper .code-block-header {
    background-color: #1f2937; /* dark:bg-gray-800 */
    color: #d1d5db; /* dark:text-gray-300 */
    border-bottom-color: #374151; /* dark:border-gray-700 */
}

.code-block-wrapper .code-block-buttons button {
    border: 1px solid #d1d5db; /* border-gray-300 */
    padding: 0.25rem 0.5rem;
    font-size: 0.75em;
    cursor: pointer;
    border-radius: 0.25rem;
    margin-left: 0.5rem;
    transition: background-color 0.2s;
    background-color: #e5e7eb; /* bg-gray-200 */
    color: #374151; /* text-gray-700 */
}
.code-block-wrapper .code-block-buttons button:hover {
    background-color: #d1d5db; /* hover:bg-gray-300 */
}
.dark .code-block-wrapper .code-block-buttons button {
    background-color: #374151; /* dark:bg-gray-700 */
    border-color: #4b5563; /* dark:border-gray-600 */
    color: #e5e7eb; /* dark:text-gray-200 */
}
.dark .code-block-wrapper .code-block-buttons button:hover {
    background-color: #4b5563; /* dark:hover:bg-gray-600 */
}
.code-block-wrapper .code-block-buttons button svg { vertical-align: middle; }

.message-content {
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
    position: relative; /* For z-index if needed, from later styles */
    z-index: 1;
}

.message-content.prose pre,
.code-block-wrapper pre { /* For non-enhanced code blocks or general pre tags */
    padding: 0 !important;
    margin:0 !important;
    border-radius: 0 !important;
    background-color: transparent !important; /* Handled by hljs or specific themes */
    white-space: pre-wrap;
    word-break: break-all;
    overflow-x: auto;
}
.message-content.prose pre code.hljs {
    padding: 1em;
    display: block;
    font-size: 0.875em;
    line-height: 1.6;
    border-bottom-left-radius: 0.375rem;
    border-bottom-right-radius: 0.375rem;
    /* Assuming Highlight.js theme handles light/dark or is switched via JS */
}

.code-output { /* For outputs of code execution, not the code itself */
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 0.875em;
    padding: 0.75em 1em;
    margin-top: 0;
    border-bottom-left-radius: 0.375rem;
    border-bottom-right-radius: 0.375rem;
    border-top: 1px solid #d1d5db; /* border-gray-300 */
    max-height: 200px;
    overflow-y: auto;
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-all;
    background-color: #f9fafb; /* bg-gray-50 */
    color: #1f2937; /* text-gray-800. Original was text-gray-800 */
}
.dark .code-output {
    background-color: #111827; /* dark:bg-gray-900 */
    color: #9ca3af; /* dark:text-gray-400 */
    border-top-color: #374151; /* dark:border-gray-700 */
}

.katex-display {
    margin: 0.75em 0 !important;
    padding: 0.5em 0;
    overflow-x: auto;
    overflow-y: hidden;
    max-width: 100%;
    color: #1f2937; /* text-gray-800 */
}
.dark .katex-display {
    color: #f3f4f6; /* dark:text-gray-100 */
}

/* Chat Container & Message Structure */
.chat-container {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 1rem;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
}

.message-container {
    display: flex;
    flex-direction: column;
    position: relative;
    margin-bottom: 0.5rem; /* Merged from initial and enhanced */
    opacity: 0;
    transform: translateY(10px);
    animation: messageSlideIn 0.3s ease-out forwards;
}

/* Base Message Bubble */
.message-bubble {
    max-width: 75%;
    padding: 0.875rem 1.125rem;
    border-radius: 1.25rem;
    margin-bottom: 0.375rem; /* Can be overridden by .message-container margin */
    word-wrap: break-word;
    overflow-wrap: break-word;
    position: relative;
    line-height: 1.5;
    font-size: 0.95rem;
    transition: all 0.2s ease-in-out;
    backdrop-filter: blur(10px);
    border: 1px solid transparent; /* Base border */
    animation: slideIn 0.3s ease-out; /* Original slideIn animation */
}
.message-bubble:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); /* shadow-lg */
}
.dark .message-bubble:hover {
     box-shadow: 0 10px 15px -3px rgba(0,0,0,0.3), 0 4px 6px -4px rgba(0,0,0,0.2); /* Example for dark:shadow-lg-dark */
}

/* User Bubble */
.user-bubble {
    align-self: flex-end;
    border-bottom-right-radius: 0.375rem;
    background: #899097;
    color: white;
    box-shadow: 0 4px 12px rgba(102,126,234,0.25); /* shadow-[0_4px_12px_rgba(102,126,234,0.25)] */
    border: 1px solid rgba(255, 255, 255, 0.1);
}
.dark .user-bubble {
    box-shadow: 0 4px 12px rgba(102,126,234,0.35); /* dark:shadow-[0_4px_12px_rgba(102,126,234,0.35)] */
}

.user-bubble::before {
    content: ''; position: absolute; bottom: 0; right: -8px; width: 0; height: 0;
    border-left: 8px solid transparent;
    border-top: 8px solid; /* Inherits color from border-top-color */
    border-top-color: inherit; /* Explicitly inherit, for the gradient */
    background: inherit; /* Not ideal for complex backgrounds, tail needs to match solid part of gradient */
    /* border-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%) 1; */ /* This is complex to replicate if background is not solid */
    /* Simpler tail: (assuming the background is mostly #764ba2 at the bottom) */
    border-top-color: #764ba2; /* Or match the dominant color of the gradient if applicable */
}

/* AI Bubble */
.ai-bubble {
    align-self: flex-start;
    border-bottom-left-radius: 0.375rem;
    background-color: #f8fafc; /* bg-slate-50 */
    color: #334155; /* text-slate-700 */
    box-shadow: 0 4px 12px rgba(0,0,0,0.08); /* shadow-[0_4px_12px_rgba(0,0,0,0.08)] */
    border: 1px solid #e2e8f0; /* border-slate-200 */
}
.dark .ai-bubble {
    background-color: #1e293b; /* dark:bg-slate-800 */
    color: #e2e8f0; /* dark:text-slate-200 */
    box-shadow: 0 4px 12px rgba(0,0,0,0.3); /* dark:shadow-[0_4px_12px_rgba(0,0,0,0.3)] */
    border-color: #334155; /* dark:border-slate-700 */
}

.ai-bubble::before {
    content: ''; position: absolute; bottom: 0; left: -8px; width: 0; height: 0;
    border-right: 8px solid #f8fafc; /* border-r-slate-50 */
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
}
.dark .ai-bubble::before {
    border-right-color: #1e293b; /* dark:border-r-slate-800 */
}

/* System Bubble */
.system-bubble {
    align-self: center;
    font-style: italic;
    font-size: 0.8rem;
    text-align: center;
    width: 85%;
    max-width: 400px;
    border-radius: 0.75rem;
    padding: 0.5rem 1rem;
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    color: #854d0e; /* text-yellow-800 */
    border: 1px solid #facc15; /* border-yellow-400 */
    box-shadow: 0 2px 8px rgba(245,158,11,0.15); /* shadow-[0_2px_8px_rgba(245,158,11,0.15)] */
}
.dark .system-bubble {
    background: linear-gradient(to right, #713f12, #854d0e); /* dark:bg-gradient-to-r dark:from-yellow-900 dark:to-yellow-800 */
    color: #fef08a; /* dark:text-yellow-200 */
    border-color: #a16207; /* dark:border-yellow-700 */
    box-shadow: 0 2px 8px rgba(251,191,36,0.15); /* dark:shadow-[0_2px_8px_rgba(251,191,36,0.15)] */
}

/* Sender Name & Avatar */
.sender-name {
    font-size: 0.7rem;
    font-weight: 600;
    margin-bottom: 0.5rem; /* from enhanced */
    letter-spacing: 0.025em;
    text-transform: uppercase;
    opacity: 0.8;
    color: #64748b; /* text-slate-500 */
}
.dark .sender-name {
    color: #94a3b8; /* dark:text-slate-400 */
}
.sender-name .flex { /* For avatar and name */
    align-items: center;
    gap: 0.5rem;
}
.sender-avatar { /* JS should set BG color based on user/AI */
    width: 24px; height: 24px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.75rem; font-weight: 600;
    color: white; /* text-white */
    box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05); /* shadow-sm */
}
.ai-bubble .sender-name {
    color: #2563eb; /* text-blue-600 */
}
.dark .ai-bubble .sender-name {
    color: #60a5fa; /* dark:text-blue-400 */
}
.user-bubble .sender-name { color: rgba(255, 255, 255, 0.9); }

.model-badge {
    padding: 0.125rem 0.375rem; border-radius: 0.375rem;
    font-size: 0.625rem; font-weight: 500; opacity: 0.8;
    background-color: rgba(0,0,0,0.1); /* bg-black/10 */
}
.dark .model-badge {
    background-color: rgba(255,255,255,0.1); /* dark:bg-white/10 */
}

/* Message Timestamp */
.message-timestamp {
    font-size: 0.625rem; /* from enhanced */
    opacity: 0.6;
    margin-top: 0.25rem; /* from original */
    margin-bottom: 0.5rem; /* from enhanced, if this is for overall timestamp block */
    text-align: right;
    color: #64748b; /* text-slate-500 */
}
.dark .message-timestamp { /* Default for ai-bubble in dark or general dark */
    color: #94a3b8; /* dark:text-slate-400 */
}
.user-bubble .message-timestamp { color: rgba(255, 255, 255, 0.8); text-align: left; } /* from enhanced */
/* .dark .ai-bubble .message-timestamp is covered by .dark .message-timestamp */


/* Typing Indicator */
.typing-bubble {
    align-self: flex-start;
    padding: 1rem 1.25rem;
    border-radius: 1.25rem;
    border-bottom-left-radius: 0.375rem;
    max-width: 75px;
    animation: pulse 1.5s ease-in-out infinite;
    background-color: #f1f5f9; /* bg-slate-100 */
    border: 1px solid #e2e8f0; /* border-slate-200 */
}
.dark .typing-bubble {
    background-color: #1e293b; /* dark:bg-slate-800 */
    border-color: #334155; /* dark:border-slate-700 */
}
.typing-dots { display: flex; gap: 0.25rem; justify-content: center; }
.typing-dot {
    width: 6px; height: 6px; border-radius: 50%;
    animation: typing 1.4s ease-in-out infinite;
    background-color: #94a3b8; /* bg-slate-400 */
}
.dark .typing-dot {
    background-color: #64748b; /* dark:bg-slate-500 */
}
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }

/* Alternative Typing Indicator (from later in file) */
.typing-indicator span { /* If this is a different component, keep separate */
    height: 8px; width: 8px; margin: 0 2px; border-radius: 50%; display: inline-block;
    animation: an-typed TrioDotsTypingAnimation 1.5s linear -0.5s infinite normal both;
    background-color: #9ca3af; /* bg-gray-400 */
}
.dark .typing-indicator span {
    background-color: #6b7280; /* dark:bg-gray-500 */
}
@keyframes an-typed { 0%{transform:translateY(0px)} 25%{transform:translateY(-1.5px)} 50%{transform:translateY(0px)} 75%{transform:translateY(1.5px)} 100%{transform:translateY(0px)} }
.typing-indicator span:nth-child(1) { animation-delay: -0.4s; }
.typing-indicator span:nth-child(2) { animation-delay: -0.2s; }
.typing-indicator span:nth-child(3) { animation-delay: 0s; }


/* Code blocks within messages (simple version) */
.message-bubble pre.simple-code { /* Added class to distinguish */
    border-radius: 0.5rem;
    padding: 0.75rem;
    margin: 0.5rem 0;
    overflow-x: auto;
    font-size: 0.85rem;
    background-color: rgba(0,0,0,0.05); /* bg-black/5 */
}
.dark .message-bubble pre.simple-code {
    background-color: rgba(255,255,255,0.05); /* dark:bg-white/5 */
}
.user-bubble pre.simple-code {
    background-color: rgba(255,255,255,0.15); /* bg-white/15 */
}

/* Links within messages */
.message-bubble a {
    text-decoration: underline;
    color: currentcolor; /* text-current */
}
.user-bubble a { text-decoration-color: rgba(255, 255, 255, 0.5); }
.ai-bubble a {
    color: #2563eb; /* text-blue-600 */
    text-decoration-color: currentColor;
}
.dark .ai-bubble a {
    color: #60a5fa; /* dark:text-blue-400 */
}


/* Enhanced Code Block Styling - THEMED */
.code-block-container {
    margin: 1rem 0;
    border-radius: 0.75rem;
    overflow: hidden;
    font-family: 'Fira Code', 'Monaco', 'Cascadia Code', 'Roboto Mono', monospace;
    background: var(--code-bg-light);
    border: 1px solid var(--code-border-light);
}
.dark .code-block-container {
    background: var(--code-bg-dark);
    border: 1px solid var(--code-border-dark);
}

.code-block-container .code-block-header { /* Explicitly scope to new container */
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--code-border-light);
    background: var(--code-header-bg-light);
}
.dark .code-block-container .code-block-header {
    border-bottom: 1px solid var(--code-border-dark);
    background: var(--code-header-bg-dark);
}

.code-block-container .code-language {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--code-header-text-light);
}
.dark .code-block-container .code-language {
    color: var(--code-header-text-dark);
}

.code-block-container .code-copy-btn {
    display: flex; align-items: center; gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    border-radius: 0.375rem;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s ease;
    background: var(--code-copy-btn-bg-light);
    border: 1px solid var(--code-copy-btn-border-light);
    color: var(--code-copy-btn-text-light);
}
.dark .code-block-container .code-copy-btn {
    background: var(--code-copy-btn-bg-dark);
    border: 1px solid var(--code-copy-btn-border-dark);
    color: var(--code-copy-btn-text-dark);
}
.code-block-container .code-copy-btn:hover {
    background: var(--code-copy-btn-hover-bg-light);
    border-color: var(--code-copy-btn-hover-border-light);
}
.dark .code-block-container .code-copy-btn:hover {
    background: var(--code-copy-btn-hover-bg-dark);
    border-color: var(--code-copy-btn-hover-border-dark);
}
.code-block-container .code-copy-btn.copied {
    background: var(--code-copy-btn-copied-bg-light);
    border-color: var(--code-copy-btn-copied-border-light);
    color: var(--code-copy-btn-copied-text-light);
}
.dark .code-block-container .code-copy-btn.copied {
    background: #22c55e; /* From original dark (green-500) */
    border-color: #16a34a; /* From original dark (green-600) */
    color: white;
}

.code-block-container .code-block { /* The actual <pre> or <code> with code */
    margin: 0;
    padding: 1rem;
    font-size: 0.875rem;
    line-height: 1.5;
    overflow-x: auto;
    color: var(--code-text-light);
    background: var(--code-bg-light); /* Ensure pre/code also has this bg */
}
.dark .code-block-container .code-block {
    color: var(--code-text-dark);
    background: var(--code-bg-dark);
}


/* Message Images Styling */
.message-images-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 0.5rem;
    margin: 0.75rem 0;
}
.message-image-item {
    position: relative; border-radius: 0.5rem; overflow: hidden;
    transition: transform 0.2s ease;
    background-color: #f3f4f6; /* bg-gray-100 */
}
.dark .message-image-item {
    background-color: #374151; /* dark:bg-gray-700 */
}
.message-image-item:hover { transform: scale(1.02); }
.message-image-item img {
    width: 100%; height: auto; display: block;
    cursor: pointer; transition: opacity 0.3s ease;
}
.message-image-item:not(.loaded) img { opacity: 0.5; }
.message-image-item.error::after {
    content: 'Failed to load image'; position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%); font-size: 0.75rem;
    color: #dc2626; /* text-red-600 */
}
.dark .message-image-item.error::after {
    color: #f87171; /* dark:text-red-500 */
}

/* Message Footer & Details */
.message-footer {
    margin-top: 0.75rem; padding-top: 0.5rem;
    border-top: 1px solid rgba(0,0,0,0.05); /* border-t border-black/5 */
}
.dark .message-footer {
    border-top-color: rgba(255,255,255,0.05); /* dark:border-white/5 */
}
.footer-content {
    display: flex; justify-content: space-between; align-items: center; gap: 1rem;
}
.message-details { display: flex; gap: 0.5rem; flex-wrap: wrap; } /* Combined from two definitions */
.message-details span { margin-right: 0.75rem; } /* From original .message-details */

.detail-badge {
    display: inline-flex; align-items: center; gap: 0.25rem;
    padding: 0.125rem 0.375rem; border-radius: 0.375rem;
    font-size: 0.625rem; font-weight: 500;
    background-color: rgba(0,0,0,0.05); /* bg-black/5 */
    color: #4b5563; /* text-gray-600 */
}
.dark .detail-badge {
    background-color: rgba(255,255,255,0.05); /* dark:bg-white/5 */
    color: #9ca3af; /* dark:text-gray-400 */
}
.token-badge {
    background-color: rgba(34,197,94,0.1); /* bg-green-500/10 */
    color: #15803d; /* text-green-700 */
}
.dark .token-badge {
    background-color: rgba(34,197,94,0.2); /* dark:bg-green-500/20 */
    color: #4ade80; /* dark:text-green-400 */
}
.time-badge {
    background-color: rgba(59,130,246,0.1); /* bg-blue-500/10 */
    color: #1d4ed8; /* text-blue-700 */
}
.dark .time-badge {
    background-color: rgba(59,130,246,0.2); /* dark:bg-blue-500/20 */
    color: #60a5fa; /* dark:text-blue-400 */
}


/* Message Actions (Hover actions on bubble) */
.message-actions-container { /* Container for buttons, appears on bubble hover */
    position: absolute;
    opacity: 0;
    transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
    transform: translateY(5px);
    pointer-events: none;
    padding: 0.25rem; border-radius: 0.5rem; z-index: 5;
    background-color: rgba(229,231,235,0.9); /* bg-gray-200/90 */
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); /* shadow-lg */
    /* From original */
    bottom: -0.75rem;
    /* From enhanced (merged with above) */
    display: flex; align-items: center; gap: 1rem;
}
.dark .message-actions-container {
    background-color: rgba(55,65,81,0.9); /* dark:bg-gray-700/90 */
}
.message-bubble:hover .message-actions-container {
    opacity: 1; transform: translateY(0); pointer-events: auto;
}
.user-bubble .message-actions-container { right: 0.5rem; }
.ai-bubble .message-actions-container { left: 0.5rem; }

.message-actions { /* Group of action buttons */
    display: flex; gap: 0.375rem; /* Original gap for message-action-btn */
    align-items: center; /* From original */
}

/* Action Buttons (General purpose, used in message actions, discussion actions) */
.action-btn, .message-action-btn, .discussion-action-btn, .grade-btn {
    background: none; border: none; padding: 0.25rem; cursor: pointer; border-radius: 0.25rem;
    display: flex; align-items: center; justify-content: center; /* from enhanced action-btn */
    transition: all 0.2s ease; /* from enhanced action-btn */
    color: #4b5563; /* text-gray-600 */
}
.action-btn:hover, .message-action-btn:hover, .discussion-action-btn:hover, .grade-btn:hover {
    background-color: #d1d5db; /* hover:bg-gray-300 */
    color: #111827; /* hover:text-gray-900 */
}
.dark .action-btn, .dark .message-action-btn, .dark .discussion-action-btn, .dark .grade-btn {
    color: #d1d5db; /* dark:text-gray-300 */
}
.dark .action-btn:hover, .dark .message-action-btn:hover, .dark .discussion-action-btn:hover, .dark .grade-btn:hover {
    background-color: #6b7280; /* dark:hover:bg-gray-500 */
    color: #f9fafb; /* dark:hover:text-gray-50 */
}
.action-btn svg, .message-action-btn svg, .discussion-action-btn svg {
    width: 0.875rem; height: 0.875rem;
}
.action-btn.destructive:hover, .message-action-btn.destructive:hover {
    background-color: rgba(239,68,68,0.1); /* bg-red-500/10 */
    color: #b91c1c; /* text-red-700 */
}
.dark .action-btn.destructive:hover, .dark .message-action-btn.destructive:hover {
    background-color: rgba(239,68,68,0.2); /* dark:bg-red-500/20 */
    color: #f87171; /* dark:text-red-500 */
}

/* Grade Buttons (Specialized action buttons) */
.grade-btn { /* Base styles from .action-btn are inherited/merged */
    padding: 0.125rem; opacity: 0.7;
    color: #6b7280; /* text-gray-500, Override base color */
}
.dark .grade-btn {
    color: #9ca3af; /* dark:text-gray-400 */
}
.grade-btn:hover { opacity: 1; } /* Keep hover from .action-btn or specialize if needed */
.grade-btn.selected-up { opacity: 1; color: #16a34a; /* text-green-600 */ }
.dark .grade-btn.selected-up { color: #22c55e; /* dark:text-green-500 */ }
.grade-btn.selected-down { opacity: 1; color: #dc2626; /* text-red-600 */ }
.dark .grade-btn.selected-down { color: #ef4444; /* dark:text-red-500 */ }
.grade-score {
    font-size: 0.75em; margin: 0 0.25rem; font-weight: 500;
    color: #6b7280; /* text-gray-500 */
}
.dark .grade-score {
    color: #9ca3af; /* dark:text-gray-400 */
}

/* Message Rating (Container for grade buttons) */
.message-rating {
    display: flex; align-items: center; gap: 0.25rem;
    padding: 0.25rem; border-radius: 0.5rem;
    background-color: rgba(0,0,0,0.05); /* bg-black/5 */
}
.dark .message-rating {
    background-color: rgba(255,255,255,0.05); /* dark:bg-white/5 */
}
.rating-btn { /* Wrapper for individual up/down vote icons */
    display: flex; align-items: center; justify-content: center;
    width: 28px; height: 28px; border: none; border-radius: 0.375rem;
    background: transparent; cursor: pointer; transition: all 0.2s ease;
    color: #9ca3af; /* text-gray-400 */
}
.rating-btn:hover {
    background-color: rgba(0,0,0,0.05); /* hover:bg-black/5 */
}
.dark .rating-btn {
    color: #6b7280; /* dark:text-gray-500 */
}
.dark .rating-btn:hover {
    background-color: rgba(255,255,255,0.05); /* dark:hover:bg-white/5 */
}
.rating-btn.upvote.active {
    background-color: rgba(34,197,94,0.1); /* bg-green-500/10 */
    color: #16a34a; /* text-green-600 */
}
.dark .rating-btn.upvote.active {
    background-color: rgba(34,197,94,0.2); /* dark:bg-green-500/20 */
    color: #4ade80; /* dark:text-green-400 */
}
.rating-btn.downvote.active {
    background-color: rgba(239,68,68,0.1); /* bg-red-500/10 */
    color: #b91c1c; /* text-red-700 */
}
.dark .rating-btn.downvote.active {
    background-color: rgba(239,68,68,0.2); /* dark:bg-red-500/20 */
    color: #f87171; /* dark:text-red-500 */
}

.rating-score { /* Numeric score between rating buttons */
    min-width: 20px; text-align: center; font-size: 0.75rem; font-weight: 600;
    color: #374151; /* text-gray-700 */
}
.dark .rating-score {
    color: #e5e7eb; /* dark:text-gray-200 */
}


/* RAG Controls */
.rag-controls { display: flex; align-items: center; gap: 0.5rem; }
.rag-toggle {
    padding: 0.375rem 0.75rem; border-radius: 9999px; cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
    font-weight: 500; border: 1px solid; font-size: 0.875rem;
}
.rag-toggle-off {
    background-color: #e5e7eb; /* bg-gray-200 */
    color: #374151; /* text-gray-700 */
    border-color: #d1d5db; /* border-gray-300 */
}
.rag-toggle-off:hover {
    background-color: #d1d5db; /* hover:bg-gray-300 */
}
.dark .rag-toggle-off {
    background-color: #374151; /* dark:bg-gray-700 */
    color: #d1d5db; /* dark:text-gray-300 */
    border-color: #4b5563; /* dark:border-gray-600 */
}
.dark .rag-toggle-off:hover {
    background-color: #4b5563; /* dark:hover:bg-gray-600 */
}
.rag-toggle-on {
    background-color: #22c55e; /* bg-green-500 */
    color: white; /* text-white */
    border-color: #22c55e; /* border-green-500 */
}
.rag-toggle-on:hover {
    background-color: #16a34a; /* hover:bg-green-600 */
}
.dark .rag-toggle-on {
    background-color: #16a34a; /* dark:bg-green-600 */
    border-color: #16a34a; /* dark:border-green-600 */
}
.dark .rag-toggle-on:hover {
    background-color: #15803d; /* dark:hover:bg-green-700 */
}
.rag-toggle:disabled { opacity: 0.6; cursor: not-allowed; }
#ragDataStoreSelect {
    font-size: 0.8rem; padding: 0.25rem 0.5rem; border-radius: 0.375rem;
    border: 1px solid #d1d5db; /* border-gray-300 */
    background-color: white; /* bg-white */
    color: #111827; /* text-gray-900 */
}
.dark #ragDataStoreSelect {
    border-color: #4b5563; /* dark:border-gray-600 */
    background-color: #374151; /* dark:bg-gray-700 */
    color: #e5e7eb; /* dark:text-gray-200 */
}

/* Discussion List Item Actions */
.discussion-item { position: relative; }
.discussion-item-actions-container {
    position: absolute; right: 0.5rem; top: 50%; transform: translateY(-50%);
    display: flex; align-items: center; gap: 0.25rem;
    padding: 0.25rem; border-radius: 0.375rem;
    opacity: 0; transition: opacity 0.2s ease-in-out; z-index: 10;
    background-color: rgba(243,244,246,0.8); /* bg-gray-100/80 */
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* shadow-md */
}
.dark .discussion-item-actions-container {
    background-color: rgba(55,65,81,0.8); /* dark:bg-gray-700/80 */
}
.discussion-item:hover .discussion-item-actions-container { opacity: 1; }
/* .discussion-action-btn uses .action-btn styles defined above */

/* Star Icon */
.star-icon {
    cursor: pointer; transition: color 0.2s;
    color: #9ca3af; /* text-gray-400 */
}
.dark .star-icon {
    color: #6b7280; /* dark:text-gray-500 */
}
.star-icon.starred {
    color: #facc15; /* text-yellow-400 */
}
.dark .star-icon.starred {
    color: #facc15; /* dark:text-yellow-400 */
}
.star-icon:hover:not(.starred) {
    color: #4b5563; /* text-gray-600 */
}
.dark .star-icon:hover:not(.starred) {
    color: #d1d5db; /* dark:text-gray-300 */
}


/* Think Block */
.think-block {
    border: 1px dashed #fde047; /* border-yellow-300 */
    border-radius: 0.25rem; margin: 0.5rem 0;
    background-color: #fefce8; /* bg-yellow-50 */
}
.dark .think-block {
    background-color: #374151; /* dark:bg-gray-700 */
    border-color: #4b5563; /* dark:border-gray-600 */
}
.think-block summary {
    cursor: pointer; padding: 0.25rem 0.5rem; font-size: 0.8em;
    font-style: italic; user-select: none;
    color: #a16207; /* text-yellow-700 */
}
.think-block summary:hover {
    background-color: #fef9c3; /* hover:bg-yellow-100 */
}
.dark .think-block summary {
    color: #9ca3af; /* dark:text-gray-400 */
}
.dark .think-block summary:hover {
    background-color: #4b5563; /* dark:hover:bg-gray-600 */
}
.think-block .think-content {
    padding: 0.5rem 0.75rem; font-size: 0.9em; max-height: 200px; overflow-y: auto;
    border-top: 1px dashed #fde047; /* border-yellow-300 */
    word-wrap: break-word; overflow-wrap: break-word; word-break: break-word;
    color: #854d0e; /* text-yellow-800 */
    background-color: #fefce8; /* bg-yellow-50 */
}
.dark .think-block .think-content {
    color: #d1d5db; /* dark:text-gray-300 */
    background-color: #1f2937; /* dark:bg-gray-800 */
    border-top-color: #4b5563; /* dark:border-gray-600 */
}

/* Image Upload Preview */
#imageUploadPreviewContainer {
    display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.5rem;
    max-height: 150px; overflow-y: auto; padding: 0.5rem;
    border: 1px dashed #d1d5db; /* border-gray-300 */
    border-radius: 0.25rem;
    background-color: #f9fafb; /* bg-gray-50 */
}
.dark #imageUploadPreviewContainer {
    border-color: #4b5563; /* dark:border-gray-600 */
    background-color: #1f2937; /* dark:bg-gray-800 */
}
.image-preview-item { position: relative; }
.image-preview-item img {
    width: 70px; height: 70px; object-fit: cover; border-radius: 0.25rem;
    border: 1px solid #d1d5db; /* border-gray-300 */
}
.dark .image-preview-item img {
    border-color: #374151; /* dark:border-gray-700 */
}
.remove-preview-btn {
    position: absolute; top: -0.3125rem; right: -0.3125rem;
    border: none; border-radius: 9999px;
    width: 1.125rem; height: 1.125rem;
    font-size: 0.625rem; line-height: 1rem; text-align: center;
    cursor: pointer; font-weight: bold;
    background-color: rgba(239,68,68,0.8); /* bg-red-500/80 */
    color: white; /* text-white */
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* shadow-md */
}
.remove-preview-btn:hover {
    background-color: #dc2626; /* hover:bg-red-600 */
}
.dark .remove-preview-btn {
    background-color: rgba(220,38,38,0.8); /* dark:bg-red-600/80 (Red-600 is #dc2626) */
}
.dark .remove-preview-btn:hover {
    background-color: #b91c1c; /* dark:hover:bg-red-700 */
}

/* Modal Styling */
.modal {
    position: fixed; inset: 0; display: flex;
    align-items: center; justify-content: center;
    z-index: 50; opacity: 0; pointer-events: none;
    transition: opacity 0.3s ease-in-out;
    padding: 1rem; backdrop-filter: blur(4px);
    background-color: rgba(0,0,0,0.75); /* bg-black/75 */
}
.dark .modal {
    background-color: rgba(0,0,0,0.85); /* dark:bg-black/85 */
}
.modal.active { opacity: 1; pointer-events: auto; }
.modal.active .modal-content { animation: modalSlideIn 0.3s ease-out; }

.modal-content {
    padding: 0; border-radius: 0.5rem;
    max-width: 95vw; width: 600px; max-height: 90vh;
    display: flex; flex-direction: column; position: relative;
    background-color: white; /* bg-white */
    color: #111827; /* text-gray-900 */
    box-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25); /* shadow-2xl */
    border: 1px solid #d1d5db; /* border-gray-300 */
}
.dark .modal-content {
    background-color: #1f2937; /* dark:bg-gray-800 */
    color: #f3f4f6; /* dark:text-gray-100 */
    border-color: #374151; /* dark:border-gray-700 */
    box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); /* dark:shadow-[0_25px_50px_-12px_rgba(0,0,0,0.5)] */
}
#loginModal .modal-content { width: 400px; padding: 1.5rem 2rem; }
#dataStoresModal .modal-content,
#fileManagementModal .modal-content { width: 700px; padding: 1.5rem 2rem; }
#settingsModal .modal-content { width: 750px; overflow: hidden; }

.modal-header {
    padding: 1rem 1.5rem; margin-bottom: 0;
    display: flex; justify-content: space-between; align-items: center;
    background-color: inherit; /* Inherit from modal-content */
    border-radius: 0.5rem 0.5rem 0 0;
    border-bottom: 1px solid #e5e7eb; /* border-b border-gray-200 */
}
.dark .modal-header {
    border-bottom-color: #374151; /* dark:border-gray-700 */
}
.modal-title {
    font-size: 1.125rem; font-weight: 600; margin: 0;
    color: #111827; /* text-gray-900 */
}
.dark .modal-title {
    color: #f9fafb; /* dark:text-gray-50 */
}
.modal-body {
    flex-grow: 1; overflow: auto; padding: 1.5rem;
    background-color: inherit;
}
#settingsModal .modal-body { display: flex; flex-direction: row; padding: 0; }
.modal-footer {
    padding: 1rem 1.5rem; margin-top: 0;
    display: flex; justify-content: flex-end; gap: 0.75rem;
    background-color: inherit;
    border-radius: 0 0 0.5rem 0.5rem;
    border-top: 1px solid #e5e7eb; /* border-t border-gray-200 */
}
.dark .modal-footer {
    border-top-color: #374151; /* dark:border-gray-700 */
}

.modal-close-btn {
    position: absolute; top: 0.75rem; right: 0.75rem;
    background: none; border: none; cursor: pointer;
    padding: 0.5rem; border-radius: 50%;
    transition: all 0.2s ease; z-index: 10;
    width: 32px; height: 32px;
    display: flex; align-items: center; justify-content: center;
    color: #6b7280; /* text-gray-500 */
}
.modal-close-btn:hover {
    background-color: #f3f4f6; /* hover:bg-gray-100 */
    color: #111827; /* hover:text-gray-900 */
}
.dark .modal-close-btn {
    color: #9ca3af; /* dark:text-gray-400 */
}
.dark .modal-close-btn:hover {
    background-color: #374151; /* dark:hover:bg-gray-700 */
    color: #f3f4f6; /* dark:hover:text-gray-100 */
}

.modal input[type="text"],
.modal input[type="password"],
.modal input[type="number"],
.modal textarea,
.modal select {
    border-radius: 0.375rem; padding: 0.5rem 0.75rem;
    width: 100%; transition: border-color 0.2s, box-shadow 0.2s;
    border: 1px solid #d1d5db; /* border border-gray-300 */
    background-color: #f9fafb; /* bg-gray-50 */
    color: #111827; /* text-gray-900 */
}
.dark .modal input[type="text"],
.dark .modal input[type="password"],
.dark .modal input[type="number"],
.dark .modal textarea,
.dark .modal select {
    border-color: #4b5563; /* dark:border-gray-600 */
    background-color: #374151; /* dark:bg-gray-700 */
    color: #f3f4f6; /* dark:text-gray-100 */
}
.dark .modal input[type="text"]::placeholder,
.dark .modal input[type="password"]::placeholder,
.dark .modal input[type="number"]::placeholder,
.dark .modal textarea::placeholder,
.dark .modal select::placeholder { /* Note: select doesn't use placeholder attribute */
    color: #9ca3af; /* dark:placeholder-gray-400 */
}

.modal input[type="text"]:focus,
.modal input[type="password"]:focus,
.modal input[type="number"]:focus,
.modal textarea:focus,
.modal select:focus {
    outline: none;
    border-color: #3b82f6; /* border-blue-500 */
    box-shadow: 0 0 0 2px rgba(59,130,246,0.2); /* ring-2 ring-blue-500/20 */
}
.dark .modal input[type="text"]:focus,
.dark .modal input[type="password"]:focus,
.dark .modal input[type="number"]:focus,
.dark .modal textarea:focus,
.dark .modal select:focus {
    border-color: #3b82f6; /* dark:border-blue-500 */
    box-shadow: 0 0 0 2px rgba(59,130,246,0.3); /* dark:ring-blue-500/30 */
}

/* Modal Buttons (general, can be more specific with bg classes) */
.modal button:not(.modal-close-btn) {
    padding: 0.5rem 1rem; border-radius: 0.375rem;
    font-weight: 500; transition: all 0.2s ease;
    border: none; cursor: pointer; font-size: 0.875rem;
}
/* Example color usage (Tailwind classes preferred on the HTML element itself) */
/* .modal .btn-primary { background-color: #2563eb; color: white; } */
/* .modal .btn-primary:hover { background-color: #1d4ed8; } */
/* .modal .btn-secondary { background-color: #e5e7eb; color: #1f2937; } */
/* .modal .btn-secondary:hover { background-color: #d1d5db; } */
/* .dark .modal .btn-secondary { background-color: #4b5563; color: #e5e7eb; } */
/* .dark .modal .btn-secondary:hover { background-color: #6b7280; } */


/* Settings Tabs */
.settings-tab-btn {
    border: 1px solid transparent; transition: background-color 0.2s, color 0.2s;
    background-color: #f3f4f6; /* bg-gray-100 */
    color: #374151; /* text-gray-700 */
}
.settings-tab-btn:hover {
    background-color: #e5e7eb; /* hover:bg-gray-200 */
    color: #111827; /* hover:text-gray-900 */
}
.dark .settings-tab-btn {
    background-color: #374151; /* dark:bg-gray-700 */
    color: #d1d5db; /* dark:text-gray-300 */
}
.dark .settings-tab-btn:hover {
    background-color: #4b5563; /* dark:hover:bg-gray-600 */
    color: #f9fafb; /* dark:hover:text-gray-50 */
}
.settings-tab-btn.active-tab {
    font-weight: 500; border-right-width: 2px; /* Or border-left-width depending on layout */
    background-color: #dbeafe; /* bg-blue-100 */
    color: #1d4ed8; /* text-blue-700 */
    border-color: #3b82f6; /* border-blue-500 */
}
.dark .settings-tab-btn.active-tab {
    background-color: rgba(30,64,175,0.5); /* dark:bg-blue-800/50 */
    color: #93c5fd; /* dark:text-blue-300 */
    border-color: #3b82f6; /* dark:border-blue-500 */
}
.settings-tab-content { padding: 0.5rem; }

/* User Menu Dropdown */
#userMenuDropdown {
    background-color: white; /* bg-white */
    border: 1px solid #e5e7eb; /* border-gray-200 */
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); /* shadow-lg */
}
.dark #userMenuDropdown {
    background-color: #1f2937; /* dark:bg-gray-800 */
    border-color: #374151; /* dark:border-gray-700 */
}
.user-menu-item {
    width: 100%; display: flex; align-items: center;
    padding-left: 0.75rem; padding-right: 0.75rem; /* px-3 */
    padding-top: 0.5rem; padding-bottom: 0.5rem; /* py-2 */
    font-size: 0.875rem; line-height: 1.25rem; /* text-sm */
    border-radius: 0.375rem; /* rounded-md */
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; /* transition-colors */
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
    color: #374151; /* text-gray-700 */
}
.user-menu-item:hover {
    background-color: #f3f4f6; /* hover:bg-gray-100 */
    color: #111827; /* hover:text-gray-900 */
}
.dark .user-menu-item {
    color: #d1d5db; /* dark:text-gray-300 */
}
.dark .user-menu-item:hover {
    background-color: #374151; /* dark:hover:bg-gray-700 */
    color: white; /* dark:hover:text-white */
}
.user-menu-icon {
    width: 1rem; height: 1rem; /* w-4 h-4 */
    margin-right: 0.75rem; /* mr-3 */
    color: #9ca3af; /* text-gray-400 */
}
.dark .user-menu-icon {
    color: #6b7280; /* dark:text-gray-500 */
}
#userMenuToggleBtn[aria-expanded="true"] #userMenuArrow { transform: rotate(180deg); }
#userMenuDropdown .flex.space-x-2 button { /* Buttons inside dropdown */
    background-color: #e5e7eb; /* bg-gray-200 */
    color: #374151; /* text-gray-700 */
    border-color: #d1d5db; /* border-gray-300 (assuming buttons have borders) */
}
#userMenuDropdown .flex.space-x-2 button:hover {
    background-color: #d1d5db; /* hover:bg-gray-300 */
}
.dark #userMenuDropdown .flex.space-x-2 button {
    background-color: #4b5563; /* dark:bg-gray-600 */
    color: #e5e7eb; /* dark:text-gray-200 */
    border-color: #6b7280; /* dark:border-gray-500 (assuming buttons have borders) */
}
.dark #userMenuDropdown .flex.space-x-2 button:hover {
    background-color: #6b7280; /* dark:hover:bg-gray-500 (original was hover:bg-gray-500, so same as dark bg) */
}
#userMenuDropdown hr.my-1 {
    border-color: #e5e7eb; /* border-gray-200 */
    margin-top: 0.25rem; margin-bottom: 0.25rem;
}
.dark #userMenuDropdown hr.my-1 {
    border-color: #374151; /* dark:border-gray-700 */
}
#userMenuToggleBtn:hover {
    background-color: #f3f4f6; /* bg-gray-100 */
}
.dark #userMenuToggleBtn:hover {
    background-color: #374151; /* dark:bg-gray-700 */
}
#userMenuToggleBtn .font-semibold {
    font-weight: 600; /* font-semibold */
    color: #374151; /* text-gray-700 */
}
.dark #userMenuToggleBtn .font-semibold {
    color: #e5e7eb; /* dark:text-gray-200 */
}
#userMenuToggleBtn #userMenuArrow {
    color: #6b7280; /* text-gray-500 */
}
.dark #userMenuToggleBtn #userMenuArrow {
    color: #9ca3af; /* dark:text-gray-400 */
}

/* Discussion Section Headers (in sidebar) */
.discussion-section-header {
    padding: 0.25rem 0.5rem; font-size: 0.75rem; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.05em; margin-top: 0.5rem;
    color: #6b7280; /* text-gray-500 */
    background-color: #f3f4f6; /* bg-gray-100 */
    border-bottom: 1px solid #e5e7eb; /* border-b border-gray-200 */
}
.dark .discussion-section-header {
    color: #9ca3af; /* dark:text-gray-400 */
    background-color: #1f2937; /* dark:bg-gray-800 */
    border-bottom-color: #374151; /* dark:border-gray-700 */
}
.discussion-section-header:first-child { margin-top: 0; }

/* App Loading Message */
#appLoadingMessage {
    color: #374151; /* text-gray-700 */
}
.dark #appLoadingMessage {
    color: #e5e7eb; /* dark:text-gray-200 */
}
html:not(.dark) #appLoadingMessage { background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%); }
.dark #appLoadingMessage { background: linear-gradient(135deg, #111827 0%, #1f2937 100%); }
#appLoadingMessage img { filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.2)); }
.dark #appLoadingMessage img { filter: drop-shadow(0 0 10px rgba(96, 165, 250, 0.4)); }
#appLoadingMessage p:first-of-type {
    color: #2563eb; /* text-blue-600 */
}
.dark #appLoadingMessage p:first-of-type {
    color: #93c5fd; /* dark:text-blue-300 */
}
#appLoadingStatus {
    color: #4b5563; /* text-gray-600 */
}
.dark #appLoadingStatus {
    color: #9ca3af; /* dark:text-gray-400 */
}
#appLoadingProgress {
    background-color: #3b82f6; /* bg-blue-500 */
}
/* Progress bar track */
html:not(.dark) #appLoadingMessage .progress-track { /* Assuming .progress-track is the class for bg-gray-700 (or equivalent) */
    background-color: #e5e7eb; /* bg-gray-200 */
}
.dark #appLoadingMessage .progress-track {
    background-color: #374151; /* bg-gray-700 */
}


/* Tailwind Typography (.prose) Overrides */
.prose {
    color: #374151; /* text-gray-700 */
    max-width: 100%;
}
.dark .prose {
    color: #d1d5db; /* dark:text-gray-300 */
}
.prose h1, .prose h2, .prose h3, .prose h4, .prose strong {
    color: #111827; /* text-gray-900 */
}
.dark .prose h1, .dark .prose h2, .dark .prose h3, .dark .prose h4, .dark .prose strong {
    color: #f3f4f6; /* dark:text-gray-100 */
}
.prose a {
    color: #2563eb; /* text-blue-600 */
    text-decoration-line: underline; /* Added for clarity from .prose defaults */
}
.prose a:hover {
    color: #1d4ed8; /* hover:text-blue-700 */
}
.dark .prose a {
    color: #60a5fa; /* dark:text-blue-400 */
}
.dark .prose a:hover {
    color: #93c5fd; /* dark:hover:text-blue-300 */
}
.prose blockquote {
    border-left-color: #d1d5db; /* border-l-gray-300 */
    color: #4b5563; /* text-gray-600 */
    /* Default prose styles: quotes: none; border-left-width: 0.25rem; font-weight: 500; font-style: italic; padding-left: 1em; */
}
.dark .prose blockquote {
    border-left-color: #4b5563; /* dark:border-l-gray-600 */
    color: #9ca3af; /* dark:text-gray-400 */
}
.prose code { /* For inline code */
    background-color: #e5e7eb; /* bg-gray-200 */
    color: #1f2937; /* text-gray-800 */
    padding: 0.1em 0.3em; border-radius: 0.25rem;
    /* Default prose code: font-weight: 600; font-size: 0.875em; */
}
.dark .prose code {
    background-color: #374151; /* dark:bg-gray-700 */
    color: #e5e7eb; /* dark:text-gray-200 */
}
.prose pre code { /* Reset for highlighted blocks if .prose is parent */
    background-color: transparent !important; color: inherit !important;
    padding: 0 !important;
    /* Reset prose inline code defaults */
    font-weight: inherit; font-size: inherit;
}
.prose ul > li::before {
    background-color: #9ca3af; /* bg-gray-400 */
    /* Default prose: content: ""; position: absolute; left: 0; top: calc(0.875em - 0.125em); width: 0.375em; height: 0.375em; border-radius: 50%; */
}
.dark .prose ul > li::before {
    background-color: #4b5563; /* dark:bg-gray-600 */
}
.prose ol > li::before {
    color: #6b7280; /* text-gray-500 */
    /* Default prose: content: counter(list-item) "."; position: absolute; left: 0; font-weight: 400; */
}
.dark .prose ol > li::before {
    color: #9ca3af; /* dark:text-gray-400 */
}
.prose hr {
    border-color: #e5e7eb; /* border-gray-200 */
    /* Default prose: border-top-width: 1px; margin-top: 3em; margin-bottom: 3em; */
}
.dark .prose hr {
    border-color: #374151; /* dark:border-gray-700 */
}
.prose table { width:auto; display:table; }
.prose th {
    color: #1f2937; /* text-gray-800 */
    background-color: #f3f4f6; /* bg-gray-100 */
    border: 1px solid #d1d5db; /* border-gray-300 */
    /* Default prose: font-weight: 600; padding: 0.5em 1em; vertical-align: bottom; */
}
.dark .prose th {
    color: #e5e7eb; /* dark:text-gray-200 */
    background-color: #374151; /* dark:bg-gray-700 */
    border-color: #4b5563; /* dark:border-gray-600 */
}
.prose td {
    border: 1px solid #d1d5db; /* border-gray-300 */
    /* Default prose: padding: 0.5em 1em; vertical-align: top; */
}
.dark .prose td {
    border-color: #4b5563; /* dark:border-gray-600 */
}
.prose img { border-radius: 0.375rem; }

/* Steps Container (e.g., for processes) */
.steps-container { /* Original, distinct from message-steps */
    margin-top: 0.5rem; padding: 0.5rem; border-radius: 0.375rem;
    border: 1px solid #d1d5db; /* border-gray-300 */
    background-color: #f9fafb; /* bg-gray-50 */
}
.dark .steps-container {
    border-color: #374151; /* dark:border-gray-700 */
    background-color: #2D3748; /* dark:bg-gray-750 (using #2D3748 as stand-in) */
}
/* .step-item in this context */
.steps-container .step-item {
    display: flex; align-items: center; font-size: 0.875rem;
    padding-top: 0.125rem; padding-bottom: 0.125rem;
}
.steps-container .step-item span.mr-2 { margin-right: 0.5rem; width: 1rem; height: 1rem; flex-shrink: 0; display:flex; align-items:center; justify-content:center;}
.steps-container .step-item span.text-gray-400 { /* Original had gray-400, map to 500/400 */
    color: #6b7280; /* text-gray-500 */
}
.dark .steps-container .step-item span.text-gray-400 {
    color: #9ca3af; /* dark:text-gray-400 */
}
.steps-container .step-item span.text-gray-200 { /* Original had gray-200, map to 700/200 for contrast */
    color: #374151; /* text-gray-700 */
}
.dark .steps-container .step-item span.text-gray-200 {
    color: #e5e7eb; /* dark:text-gray-200 */
}
.steps-container .step-item span.text-red-400 {
    color: #dc2626; /* text-red-600 */
}
.dark .steps-container .step-item span.text-red-400 {
    color: #f87171; /* dark:text-red-400 */
}
.steps-container .step-item span.line-through { text-decoration: line-through; }
.steps-container .step-item span.text-gray-500 { /* For description */
    color: #6b7280; /* text-gray-500 */
}
.dark .steps-container .step-item span.text-gray-500 {
    color: #6b7280; /* dark:text-gray-500 */
}
.steps-container .step-item div.animate-pulse { width: 0.625rem; height: 0.625rem; border-radius: 9999px; background-color: #3b82f6; /* bg-blue-500 */ }
/* dark:bg-blue-500 is same */

/* Message Steps & Metadata (Enhanced version) */
.message-steps, .message-metadata {
    margin: 1rem 0; border-radius: 0.75rem; overflow: hidden;
    border: 1px solid #e5e7eb; /* border-gray-200 */
    background-color: #f9fafb; /* bg-gray-50 */
}
.dark .message-steps, .dark .message-metadata {
    border-color: #374151; /* dark:border-gray-700 */
    background-color: #1f2937; /* dark:bg-gray-800 */
}
.steps-header, .metadata-header {
    display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem 1rem;
    font-size: 0.875rem; font-weight: 600;
    background-color: #f3f4f6; /* bg-gray-100 */
    border-bottom: 1px solid #e5e7eb; /* border-b border-gray-200 */
    color: #374151; /* text-gray-700 */
}
.dark .steps-header, .dark .metadata-header {
    background-color: #2D3748; /* dark:bg-gray-750 (using #2D3748 as stand-in) */
    border-bottom-color: #374151; /* dark:border-gray-700 */
    color: #e5e7eb; /* dark:text-gray-200 */
}
.steps-list, .metadata-list { padding: 0.5rem; }

.message-steps .step-item { /* Scoped to message-steps */
    display: flex; gap: 0.75rem; padding: 0.75rem; margin-bottom: 0.5rem;
    border-radius: 0.5rem;
    background-color: white; /* bg-white */
    border: 1px solid #e5e7eb; /* border-gray-200 */
}
.dark .message-steps .step-item {
    background-color: #111827; /* dark:bg-gray-900 */
    border-color: #374151; /* dark:border-gray-700 */
}
.message-steps .step-item:last-child { margin-bottom: 0; }

.step-indicator {
    flex-shrink: 0; width: 32px; height: 32px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    background-color: #2563eb; /* bg-blue-600 */
}
/* dark:bg-blue-500 if a shade difference is desired, current uses same for both */
.step-number {
    color: white; /* text-white */
    font-size: 0.75rem; /* text-xs */
    font-weight: 600; /* font-semibold */
}
.step-content { flex: 1; }
.step-title {
    font-weight: 600; margin-bottom: 0.25rem;
    color: #111827; /* text-gray-900 */
}
.dark .step-title {
    color: #f3f4f6; /* dark:text-gray-100 */
}
.step-description {
    font-size: 0.875rem; margin-bottom: 0.25rem;
    color: #4b5563; /* text-gray-600 */
}
.dark .step-description {
    color: #9ca3af; /* dark:text-gray-400 */
}
.step-duration {
    font-size: 0.75rem;
    color: #6b7280; /* text-gray-500 */
}
.dark .step-duration {
    color: #6b7280; /* dark:text-gray-500 */
}

.metadata-item {
    display: flex; justify-content: space-between; align-items: center;
    padding: 0.5rem 0.75rem;
    border-bottom: 1px solid #f3f4f6; /* border-b border-gray-100 */
}
.dark .metadata-item {
    border-bottom-color: #374151; /* dark:border-gray-700 */
}
.metadata-item:last-child { border-bottom: none; }
.metadata-key {
    font-weight: 500;
    color: #374151; /* text-gray-700 */
}
.dark .metadata-key {
    color: #e5e7eb; /* dark:text-gray-200 */
}
.metadata-value {
    font-size: 0.875rem;
    color: #4b5563; /* text-gray-600 */
}
.dark .metadata-value {
    color: #9ca3af; /* dark:text-gray-400 */
}

/* Empty State Styling */
.chat-empty-state {
    display: flex; align-items: center; justify-content: center;
    min-height: 400px; padding: 2rem;
}
.empty-state-content { text-align: center; max-width: 400px; }
.empty-state-icon {
    width: 64px; height: 64px; margin: 0 auto 1rem;
    color: #d1d5db; /* text-gray-300 */
}
.dark .empty-state-icon {
    color: #4b5563; /* dark:text-gray-600 */
}
.empty-state-title {
    font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem;
    color: #1f2937; /* text-gray-800 */
}
.dark .empty-state-title {
    color: #f3f4f6; /* dark:text-gray-100 */
}
.empty-state-description {
    line-height: 1.5;
    color: #4b5563; /* text-gray-600 */
}
.dark .empty-state-description {
    color: #9ca3af; /* dark:text-gray-400 */
}

/* Date Separator Styling */
.date-separator { display: flex; align-items: center; margin: 1.5rem 0; gap: 1rem; }
.date-separator-line {
    flex: 1; height: 1px;
    background-color: #e5e7eb; /* bg-gray-200 */
}
.dark .date-separator-line {
    background-color: #374151; /* dark:bg-gray-700 */
}
.date-separator-text {
    font-size: 0.75rem; font-weight: 500; text-transform: uppercase;
    letter-spacing: 0.05em; padding: 0.25rem 0.75rem; /* Adjusted padding */
    border-radius: 1rem;
    color: #6b7280; /* text-gray-500 */
    background-color: #f3f4f6; /* bg-gray-100 */
}
.dark .date-separator-text {
    color: #9ca3af; /* dark:text-gray-400 */
    background-color: #1f2937; /* dark:bg-gray-800 */
}

/* Empty Message Placeholder */
.empty-message {
    font-style: italic; margin: 0;
    color: #6b7280; /* text-gray-500 */
}
.dark .empty-message {
    color: #9ca3af; /* dark:text-gray-400 */
}


/* General UI Theming for Sidebar, Main, Footer */
aside {
    background-color: white; /* bg-white */
    border-right: 1px solid #e5e7eb; /* border-r border-gray-200 */
}
.dark aside {
    background-color: #1f2937; /* dark:bg-gray-800 */
    border-right-color: #374151; /* dark:border-gray-700 */
}
aside .border-b { border-bottom-color: #e5e7eb; /* border-gray-200 */ }
.dark aside .border-b { border-bottom-color: #374151; /* dark:border-gray-700 */ }
aside .border-t { border-top-color: #e5e7eb; /* border-gray-200 */ }
.dark aside .border-t { border-top-color: #374151; /* dark:border-gray-700 */ }

aside #newDiscussionBtn {
    background-color: #2563eb; /* bg-blue-600 */
    color: white; /* text-white */
}
aside #newDiscussionBtn:hover {
    background-color: #1d4ed8; /* hover:bg-blue-700 */
}

aside #discussionSearchInput {
    background-color: white; /* bg-white */
    border: 1px solid #d1d5db; /* border-gray-300 */
    color: #111827; /* text-gray-900 */
    /* placeholder-gray-500 is handled by ::placeholder */
}
aside #discussionSearchInput::placeholder { color: #6b7280; }
aside #discussionSearchInput:focus {
    /* focus:ring-blue-500 focus:border-blue-500 */
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59,130,246,0.5); /* Adjust opacity as needed for ring */
}
.dark aside #discussionSearchInput {
    background-color: #374151; /* dark:bg-gray-700 */
    border-color: #4b5563; /* dark:border-gray-600 */
    color: #e5e7eb; /* dark:text-gray-200 */
}
.dark aside #discussionSearchInput::placeholder { color: #6b7280; /* dark:placeholder-gray-500 */ }
.dark aside #discussionSearchInput:focus {
    border-color: #3b82f6; /* dark:focus:border-blue-500 */
    box-shadow: 0 0 0 3px rgba(59,130,246,0.5); /* dark:focus:ring-blue-500 */
}

aside #discussionListContainer .text-gray-500 { color: #6b7280; }
.dark aside #discussionListContainer .text-gray-500 { color: #9ca3af; /* dark:text-gray-400 */ }

aside #discussionListContainer .discussion-item {
    color: #374151; /* text-gray-700 */
}
aside #discussionListContainer .discussion-item:hover {
    background-color: #f3f4f6; /* hover:bg-gray-100 */
}
.dark aside #discussionListContainer .discussion-item {
    color: #d1d5db; /* dark:text-gray-300 */
}
.dark aside #discussionListContainer .discussion-item:hover {
    background-color: #374151; /* dark:hover:bg-gray-700 */
}

aside #discussionListContainer .discussion-item.active-discussion { /* Assuming .active-discussion or similar for bg-blue-100 */
    background-color: #dbeafe; /* bg-blue-100 */
    color: #1e40af; /* text-blue-800 */
}
aside #discussionListContainer .discussion-item.active-discussion:hover {
    background-color: #bfdbfe; /* hover:bg-blue-200 */
}
.dark aside #discussionListContainer .discussion-item.active-discussion {
    background-color: rgba(29,78,216,0.5); /* dark:bg-blue-700/50 (Blue-700 is #1d4ed8) */
    color: #bfdbfe; /* dark:text-blue-200 */
}
.dark aside #discussionListContainer .discussion-item.active-discussion:hover {
    background-color: rgba(29,78,216,0.7); /* dark:hover:bg-blue-700/70 */
}

aside #userInfoContainer #userMenuToggleBtn:hover {
    background-color: #f3f4f6; /* hover:bg-gray-100 */
}
.dark aside #userInfoContainer #userMenuToggleBtn:hover {
    background-color: #374151; /* dark:hover:bg-gray-700 */
}
aside #userInfoContainer #userMenuToggleBtn .text-gray-400 { color: #9ca3af; } /* User icon in toggle */
.dark aside #userInfoContainer #userMenuToggleBtn .text-gray-400 { color: #6b7280; /* dark:text-gray-500 */ }
aside #userInfoContainer #usernameDisplay {
    color: #374151; /* text-gray-700 */
}
.dark aside #userInfoContainer #usernameDisplay {
    color: #e5e7eb; /* dark:text-gray-200 */
}
aside #adminBadge {
    background-color: #fee2e2; /* bg-red-100 */
    color: #991b1b; /* text-red-800 */
}
.dark aside #adminBadge {
    background-color: rgba(153,27,27,0.5); /* dark:bg-red-800/50 (Red-800 is #991b1b) */
    color: #fecaca; /* dark:text-red-200 (Red-200 is #fecaca) */
}

main {
    background-color: #f9fafb; /* bg-gray-50 */
}
.dark main {
    background-color: #111827; /* dark:bg-gray-900 */
}
main > header {
    background-color: white; /* bg-white */
    border-bottom: 1px solid #e5e7eb; /* border-b border-gray-200 */
}
.dark main > header {
    background-color: #1f2937; /* dark:bg-gray-800 */
    border-bottom-color: #374151; /* dark:border-gray-700 */
}
main > header #discussionTitle {
    color: #1f2937; /* text-gray-800 */
}
.dark main > header #discussionTitle {
    color: #f3f4f6; /* dark:text-gray-100 */
}
main > header #languageSelector {
    border: 1px solid #d1d5db; /* border-gray-300 */
    background-color: white; /* bg-white */
    color: #111827; /* text-gray-900 */
}
.dark main > header #languageSelector {
    border-color: #4b5563; /* dark:border-gray-600 */
    background-color: #374151; /* dark:bg-gray-700 */
    color: #e5e7eb; /* dark:text-gray-200 */
}
main > header #themeToggleBtn {
    color: #6b7280; /* text-gray-500 */
}
main > header #themeToggleBtn:hover {
    background-color: #e5e7eb; /* hover:bg-gray-200 */
}
.dark main > header #themeToggleBtn {
    color: #9ca3af; /* dark:text-gray-400 */
}
.dark main > header #themeToggleBtn:hover {
    background-color: #374151; /* dark:hover:bg-gray-700 */
}
main #chatMessages .text-gray-500 { color: #6b7280; } /* e.g., "No messages yet" */
.dark main #chatMessages .text-gray-500 { color: #9ca3af; /* dark:text-gray-400 */ }

main > footer {
    background-color: white; /* bg-white */
    border-top: 1px solid #e5e7eb; /* border-t border-gray-200 */
}
.dark main > footer {
    background-color: #1f2937; /* dark:bg-gray-800 */
    border-top-color: #374151; /* dark:border-gray-700 */
}
main > footer label[for="imageUploadInput"]:hover {
    background-color: #f3f4f6; /* hover:bg-gray-100 */
}
.dark main > footer label[for="imageUploadInput"]:hover {
    background-color: #374151; /* dark:hover:bg-gray-700 */
}
main > footer label[for="imageUploadInput"] svg {
    color: #6b7280; /* text-gray-500 */
}
main > footer label[for="imageUploadInput"] svg:hover { /* The hover was on label, this makes icon change color too */
    color: #374151; /* hover:text-gray-700 */
}
.dark main > footer label[for="imageUploadInput"] svg {
    color: #9ca3af; /* dark:text-gray-400 */
}
.dark main > footer label[for="imageUploadInput"] svg:hover {
    color: #e5e7eb; /* dark:hover:text-gray-200 */
}
main > footer #messageInput {
    background-color: white; /* bg-white */
    border: 1px solid #d1d5db; /* border-gray-300 */
    color: #111827; /* text-gray-900 */
}
main > footer #messageInput::placeholder { color: #9ca3af; /* placeholder-gray-400 */ }
main > footer #messageInput:focus {
    border-color: #3b82f6; /* focus:border-blue-500 */
    /* For focus ring if needed: box-shadow: 0 0 0 3px rgba(59,130,246,0.5); outline: none; */
}
.dark main > footer #messageInput {
    background-color: #374151; /* dark:bg-gray-700 */
    border-color: #4b5563; /* dark:border-gray-600 */
    color: #f3f4f6; /* dark:text-gray-100 */
}
.dark main > footer #messageInput::placeholder { color: #6b7280; /* dark:placeholder-gray-500 */ }
.dark main > footer #messageInput:focus {
    border-color: #3b82f6; /* dark:focus:border-blue-500 */
}

main > footer #sendMessageBtn {
    background-color: #2563eb; /* bg-blue-600 */
    color: white; /* text-white */
}
main > footer #sendMessageBtn:hover {
    background-color: #1d4ed8; /* hover:bg-blue-700 */
}
main > footer #stopGenerationBtn {
    background-color: #dc2626; /* bg-red-600 */
    color: white; /* text-white */
}
main > footer #stopGenerationBtn:hover {
    background-color: #b91c1c; /* hover:bg-red-700 */
}
main > footer #statusMessage {
    color: #6b7280; /* text-gray-500 */
}
.dark main > footer #statusMessage {
    color: #6b7280; /* dark:text-gray-500 (same as light) */
}
main > footer #pyodideStatus {
    color: #3b82f6; /* text-blue-500 */
}
.dark main > footer #pyodideStatus {
    color: #60a5fa; /* dark:text-blue-400 */
}


/* Animations */
@keyframes typing {
    0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
    30% { transform: translateY(-10px); opacity: 1; }
}
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}
@keyframes slideIn { /* Original bubble animation */
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
@keyframes messageSlideIn { /* Enhanced message container animation */
    to { opacity: 1; transform: translateY(0); }
}
@keyframes modalSlideIn {
    from { opacity: 0; transform: scale(0.95) translateY(-10px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
}

/* Responsive Design */
@media (max-width: 768px) {
    .message-bubble { max-width: 90%; padding: 0.75rem 1rem; font-size: 0.9rem; }
    .system-bubble { width: 95%; font-size: 0.75rem; }

    .modal { padding: 0.5rem; }
    .modal-content { width: 100% !important; max-width: 100% !important; margin: 0; border-radius: 0.75rem; }
    #loginModal .modal-content,
    #dataStoresModal .modal-content,
    #fileManagementModal .modal-content,
    #settingsModal .modal-content {
        width: 100% !important; /* Already set by above, but explicit */
        padding: 1rem;
    }

    /* Enhanced footer responsive */
    .footer-content { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
    .message-actions-container { align-self: flex-end; } /* For actions within footer */
    .message-images-container { grid-template-columns: 1fr; }
    .code-block-container .code-block-header { padding: 0.5rem 0.75rem; }
    .code-block-container .code-block { padding: 0.75rem; font-size: 0.8rem; }
}

/* Accessibility improvements */
@media (prefers-reduced-motion: reduce) {
    .message-container, .message-bubble, .modal.active .modal-content {
        animation: none;
        opacity: 1;
        transform: none;
    }
    .action-btn, .rating-btn, .code-copy-btn, .message-bubble, .modal, .modal-close-btn, .rag-toggle, .settings-tab-btn, .star-icon {
        transition: none;
    }
}

/* High contrast mode support (Example - may need further refinement based on actual high contrast needs) */
@media (prefers-contrast: high) {
    .message-bubble, .code-block-container, .modal-content {
        border-width: 2px;
        border-style: solid; /* Ensure border is visible */
    }
    /* Ensure sufficient contrast for text on various backgrounds */
    .detail-badge { border: 1px solid currentColor; }
}

/* Add to your style.css or Tailwind custom CSS */
.input-field {
    @apply block w-full rounded-md border-gray-600 bg-gray-700 text-gray-200 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-500 focus:ring-opacity-50 placeholder-gray-500 text-sm;
}

.input-file {
    @apply block w-full text-sm text-gray-400
           file:mr-4 file:py-2 file:px-4
           file:rounded-md file:border-0
           file:text-sm file:font-semibold
           file:bg-gray-600 file:text-gray-200
           hover:file:bg-gray-500 cursor-pointer;
}

.btn {
    @apply px-4 py-2 text-sm font-medium rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 transition-colors duration-150;
}

.btn-primary {
    @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 disabled:opacity-50;
}

.btn-secondary {
    @apply bg-gray-600 text-gray-200 hover:bg-gray-500 focus:ring-gray-500;
}

/* Ensure modal content has good padding if not already handled */
.modal-content .modal-body {
    padding-left: 1.5rem; /* px-6 */
    padding-right: 1.5rem; /* px-6 */
}
.modal-content .modal-footer {
    padding: 1rem 1.5rem; /* py-4 px-6 */
}

/* For Friends & Messages Modal Tabs */
.friends-messages-tab-btn {
    @apply border-b-2 border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500;
    transition: color 0.2s, border-color 0.2s;
}
.friends-messages-tab-btn.active-tab {
    @apply text-blue-400 border-blue-500 font-semibold;
}

.dm-message-bubble {
    padding: 0.5rem 0.75rem;
    border-radius: 0.75rem;
    margin-bottom: 0.25rem;
    max-width: 75%;
    word-wrap: break-word;
}
.dm-message-bubble.sent {
    background-color: #2563eb; /* theme.colors.blue[600] */
    color: white;
    margin-left: auto;
    border-bottom-right-radius: 0.25rem;
}
.dm-message-bubble.received {
    background-color: #4b5563; /* theme.colors.gray[600] */
    color: #e5e7eb; /* theme.colors.gray[200] */
    margin-right: auto;
    border-bottom-left-radius: 0.25rem;
}
.dm-message-timestamp {
    display: block;
    font-size: 0.65rem; /* text-xs */
    color: #9ca3af; /* theme.colors.gray[400] */
    margin-top: 0.25rem;
    text-align: right;
}
.dm-message-bubble.sent .dm-message-timestamp {
    color: #d1d5db; /* theme.colors.gray[300] */
}